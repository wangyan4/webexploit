import React, { Component } from 'react'

export default class Content extends Component {
  constructor() {
    super();
    this.state = {
      data: []
    }
  }
  componentDidMount() {
    let id = this.props.match.params.id;
    console.log(id);
    let url_api = `https://cnodejs.org/api/v1/topic/${id}`;
    let obj = {
      method: "get"
    }
    fetch(url_api, obj)
      .then((res) => res.json())
      .then((data) => {
        this.setState({
          data: data.data
        })
      })
  }
  componentDidUpdate(prevProps, prevStates) {
    if (prevProps.match.params.id !== this.props.match.params.id) {
      let id = this.props.match.params.id;
      let url_api = `https://cnodejs.org/api/v1/topic/${id}`;
      let obj = {
        method: "get"
      }
      fetch(url_api, obj)
        .then((res) => res.json())
        .then((data) => {
          this.setState({
            data: data.data
          })
        })
    }
  }
  render() {
    return (
      <div className="contentList" dangerouslySetInnerHTML={{__html:this.state.data.content}}>
      </div>
    )
  }
}
